<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
	<meta http-equiv="Content-Type" content="text/html" ; charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

	<title>PetHub</title>

	<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" />
	<script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script type="text/javascript" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link
		href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@100;300;400;500;700;800;900&display=swap"
		rel="stylesheet" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
	<link rel="stylesheet" type="text/css" th:href="@{/fontawesome/all.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/style-homepage.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/style.css}" />
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js}"
		integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
		crossorigin="anonymous"></script>
	<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js}"
		crossorigin="anonymous"></script>
	<link href="bootstrap-rating.css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" th:href="@{/container-product.css}" />
	<link th:href="@{/star-rating/css/star-rating.css}" media="all" rel="stylesheet" type="text/css" />
	<script th:src="@{/star-rating/js/star-rating.js}" type="text/javascript"></script>
	<link th:href="@{/star-rating/themes/krajee-svg/theme.css}" media="all" rel="stylesheet" type="text/css" />
	<script th:src="@{/star-rating/themes/krajee-svg/theme.js}"></script>
</head>

<body>
	<div class="w-100 h-100">
		<div class="product-detail-container d-flex flex-column w-100 h-100">

			<div th:replace="~{navigation :: header_menu}"></div>
			<div class="w-100 my-1 mb-4">
				<!--		<div th:replace="~{navigation :: search_nav}"></div>-->

				<!--breadcrumb-->
				<div class="d-flex" style="width: 100%;padding-left: 55px">
					<div th:replace="~{breadcrumb :: content}"></div>
				</div>
				<!--breadcrumb-->

				<!--product detail-->
				<div class=" d-flex bg-color justify-content-center px-2">
					<!--image-->
					<div class="col-sm-3 container-detail-1">
						<div style="min-width: 346px;max-height: 346px; min-height: 345.9px;">
							<img id="bigImage" th:src="@{${product.mainImagePath}}" class="img-fluid" index="0"
								style="max-height: inherit;min-width: 100% !important;object-fit: contain;" />
						</div>

						<!--thumbnail image slide show-->
						<div class="d-flex justify-content-center">
							<div class="m-2 border border-secondary p-1">
								<img class="image-thumbnail" th:src="@{${product.mainImagePath}}" height="50" width="55"
									index="0" />
							</div>
							<!--extra image-->
							<th:block th:each="extraImage, status : ${product.images}">
								<div class="m-2 border border-secondary p-1">
									<img class="image-thumbnail" th:src="@{${extraImage.imagePath}}" height="50"
										width="55" th:index="${status.count}" />
								</div>
							</th:block>
							<!--extra image-->
						</div>
						<!--thumbnail slide show-->
						<div class="p-2">
							<div>
								<hr />
							</div>
							<div>
								<h6>Product Detail:</h6>
							</div>
							<div class="d-flex font-mode">
								<span><i class="bi bi-check-circle-fill text-primary"
										style="font-size: 15px"></i></span>
								<div th:utext="${product.shortDescription}"></div>
							</div>
						</div>
					</div>
					<!--image-->

					<!--detail-->
					<div class="container-detail h-100" style="width: 38%;">
						<div class="container">
							<div class="p-3 first-detail">
								<div>
									Brand: <a
										th:href="@{'/b/'+${product.brand.name}+'/products/page/1?sortDir=default'}"><span>[[${product.brand.name}]]</span></a>
								</div>
								<div>
									<h1 class="modify-name">[[${product.name}]]</h1>
									<div class="row ml-1">
										<div class="col-xs">
											<input type="text" class="product-detail-rating-star" dir="ltr" data-size="md"
												th:value="${product.averageRating}" />
										</div>
										<div class="col-xs ml-1 mt-3">
											<a th:href="@{${product.URI} + '#review'}">[[${product.reviewCount}]] rating(s)</a>
										</div>
										<div class="col-xs ml-3 mt-3">
											<a th:href="@{${product.URI} + '#qa'}">[[${numberOfAnsweredQuestions}]] answered questions</a>
										</div>
									</div>
								</div>

								<div class="price-modify">

									<span th:if="${product.discountPercent <= 0}">
										<div
											th:replace="~{product/product_fragment :: price_fragment(${product.price})}">
										</div>
									</span>
								</div>
								<div th:if="${product.discountPercent > 0}">
									<!--Price-->
									<del th:if="${product.discountPercent > 0}" class="text-secondary"
										style="font-size: small;">
										<div
											th:replace="~{product/product_fragment :: price_fragment(${product.price})}">
										</div>
									</del>
									<span class="price">
										<div
											th:replace="~{product/product_fragment :: price_fragment(${product.discountPrice})}">
										</div>
									</span>
									<span style="color:#fff;font-weight: 500;background-color: #FF6969;margin-left: 20px; border-radius: 8px;
									padding: 3px;">
										-[[${#numbers.formatDecimal(product.discountPercent, 1,
										THOUSANDS_POINT_TYPE, DECIMAL_DIGITS, DECIMAL_POINT_TYPE)}]]%

									</span>
								</div>


								<div>
									<!--product full description-->
									<!--if error , copy this paste the down full description-->
									<div class="row">
										<div class="col-12">
											<div>
												<hr />
											</div>
											<div>
												<h3>Product Description:</h3>
											</div>
											<div th:utext="${product.fullDescription}"></div>
										</div>
									</div>

								</div>
							</div>

							<div class="p-3 second-detail">
								<span>
									<h3>Product Specification</h3>
								</span>
								<th:block th:each="detail : ${product.details}">
									<div class="child-second-dt">
										<div class="layout-outside">
											<div class="spacing"
												style="display: grid;grid-template-columns: 55% 45%;gap: 4px;">
												<span><b>[[${detail.name}]]</b></span>
												<span>[[${detail.value}]]</span>
											</div>
										</div>
									</div>
								</th:block>
							</div>
						</div>
					</div>
					<!--detail-->

					<!--action-->
					<div class="col-sm-3 container-detail-3 h-100">
						<div class="p-2">
							<div>
								<span th:if="${product.inStock}" class="text-success"><b>In Stock</b></span>
								<span th:unless="${product.inStock}" class="text-danger"><b>Out of Stock</b></span>

							</div>
							<!--<div class="mt-2 quantity-container">
								<button class="btn btn-minus" id="btnMinus">
									<i class="bi bi-dash"></i>
								</button>
								<input type="number" value="1" min="1" class="mx-2" id="quantity" />
								<button class="btn btn-plus" id="btnPlus">
									<i class="bi bi-plus"></i>
								</button>
							</div>-->
							<div class="price-modify my-2 stick-top">
								<!--Total Amount:
								<span th:if="${product.discountPercent <= 0}">
									<div th:replace="~{product/product_fragment :: price_fragment(${product.price})}">
									</div>
								</span>-->



								<th:block th:if="${product.inStock}">
									<div th:replace="~{cart/quantity_control :: quantity_control(1, ${product.id})}">
									</div>
									<div class="mt-3">
										<input type="button" value="Add to Cart" id="buttonAdd2Cart"
											class="btn btn-outline-primary text-center w-100" />
									</div>
								</th:block>
								<!--<div class="my-3">
									<a th:href="@{/checkout}"> Buy now</a>
								</div>-->
								<!--<div class="my-3">
									<th:block th:if="${product.inStock}">
									<div th:replace="~{cart/quantity_control :: quantity_control(1, ${product.id})}"></div>
									<input type="button" value="Add to Cart" id="buttonAdd2Cart"
										class="btn btn-outline-primary text-center w-100" />
									</th:block>
								</div>-->
							</div>
						</div>

						<!--action-->
					</div>
					<!--product detail-->


					<!--product full description-->

					<!--product specification-->

					<!--product specification-->
				</div>

				<div th:replace="~{product/images_carousel :: content}"></div>
				<div th:replace="~{fragments :: modal_dialog}"></div>
			</div>
			<div th:replace="~{navigation :: footer_menu}"></div>
		</div>
		<script type="text/javascript">
			contextPath = "[[@{/}]]";
			productId = "[[${product.id}]]";
			var csrfHeaderName = "[[${_csrf.headerName}]]";
			var csrfValue = "[[${_csrf.token}]]";

		decimalSeparator = "[[${DECIMAL_POINT_TYPE == 'COMMA' ? ',' : '.'}]]";
		thousandSeparator = "[[${THOUSANDS_POINT_TYPE == 'COMMA' ? ',' : '.'}]]";

			$(document).ready(function () {
				bigImage = $("#bigImage");

			$(".image-thumbnail").mouseover(function () {
				currentImageSource = $(this).attr("src");
				currentImageIndex = $(this).attr("index");

				bigImage.attr("src", currentImageSource);
				bigImage.attr("index", currentImageIndex);
			});
				

			bigImage.on("click", function () {
				$("#carouselModal").modal("show");
				imageIndex = parseInt(bigImage.attr("index"));
				$("#carouselExampleIndicators").carousel(imageIndex);
			});

			$(".linkVoteReview").on("click", function (e) {
				e.preventDefault();
				doVote($(this), "review");
			});

			$(".linkVoteQuestion").on("click", function (e) {
				e.preventDefault();
				doVote($(this), "question");
			});
		});

	</script>
	<script type="text/javascript" th:src="@{/js/jquery.number.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/common_rating.js}"></script>
	<script type="text/javascript" th:src="@{/js/common_modal.js}"></script>
	<script type="text/javascript" th:src="@{/js/quantity_control.js}"></script>
	<script type="text/javascript" th:src="@{/js/add_to_cart.js}"></script>
	<script type="text/javascript" th:src="@{/js/common_vote.js}"></script>
	<script type="text/javascript" th:src="@{/js/question_post.js}"></script>				
		

</body>

</html>